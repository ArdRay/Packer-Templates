---
- name: "initial-setup.yml"
  hosts: localhost
  gather_facts: yes

  tasks:
  - name: Colorize root shell prompt
    lineinfile:
      path: /root/.bashrc
      line: 'export PS1="\[\033[38;5;11m\]\u\[$(tput sgr0)\]\[\033[38;5;15m\]@\h:\[$(tput sgr0)\]\[\033[38;5;6m\][\w]:\[$(tput sgr0)\]\[\033[38;5;15m\] \[$(tput sgr0)\]"'
      state: present

  - name: Install packages (Rocky)
    dnf:
      name: 
      - bash-completion
      - curl
      - git
      - rsync
      - vim
      - wget
      state: latest      
    when: ansible_distribution == "Rocky"
  
  - name: Create a new regular user with sudo privileges
    user:
      name: "ard"
      state: present
      groups: wheel
      append: true
      create_home: true
  
  - name: Set authorized key for remote user
    ansible.posix.authorized_key:
      user: "ard"
      state: present
      key: "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAICquToJ6AELUkLfQLWilvf3uL0O8TJuc5X3p97vGZY96"
